# Вариант 10

## Цель работы:

- Целью является приобретение практических навыков в:
- Управлении серверами сообщений (№5)
- Применение отложенных вычислений (№6)
- Интеграция программных систем друг с другом (№7)

## Задание

1. Реализовать распределенную систему по асинхронной обработке запросов. В данной распределенной системе должно существовать 2 вида узлов: «управляющий» и «вычислительный». Необходимо объединить данные узлы в соответствии с той топологией, которая определена вариантом. Связь между узлами необходимо осуществить при помощи технологии очередей сообщений. Также в данной системе необходимо предусмотреть проверку доступности узлов в соответствии с вариантом. При убийстве («kill -9») любого вычислительного узла система должна пытаться максимально сохранять свою работоспособность, а именно все дочерние узлы убитого узла могут стать недоступными, но родительские узлы должны сохранить свою работоспособность.

   Управляющий узел отвечает за ввод команд от пользователя и отправку этих команд на вычислительные узлы.

***Task 10:***

*Топология 4.* Все вычислительные узлы хранятся в идеально сбалансированном бинарном дереве. Каждый следующий узел должен добавляться в самое наименьшее поддерево.

*Тип команд 3.* (локальный таймер) Формат команды сохранения значения: exec id subcommand

subcommand – одна из трех команд: start, stop, time.

start – запустить таймер

stop – остановить таймер

time – показать время локального таймера в миллисекундах



*Тип проверки доступности узлов 3.* Формат команды: heartbit time

Каждый узел начинает сообщать раз в time миллисекунд о том, что он работоспособен. Если от узла нет сигнала в течении 4*time миллисекунд, то должна выводится пользователю строка: «Heartbit: node id is unavailable now», где id – идентификатор недоступного вычислительного узла.

![img](https://lh7-us.googleusercontent.com/sdNoqQIsWdfNHs5x96kG-22OGbHTRgLbMLxZVGaYh9FxG7L_BeFYuEdxYsCmP89iGuXfo8BZA2km8DWjjP7-Ckh_pXrjAXpvaBv4P9x8bH6WVTM6IXl45N7e-Gkh8BUr7QASZhlYypBd)

This work may be an example of using libraru ZeroMQ with c++.'

 I've used pattern PUB-SUB.  But manage node is a pub and sub simultaneously, also like and calculations node.

Also timer.cpp can be helpful
